# 极客兔兔 7天实现ORM框架


## 逻辑梳理

### 1、日志
> 需要支持日志，并且日志至少包含以下特性
* 支持日志分级（至少包含Info、Error、Disabled 三个级别）
* 不同的日志级别应当有不同的颜色区分
* 日志的格式至少包含日志代码对应的文件名和行号

### 2、核心结构
* Session --> 负责与数据库进行交互
* Engine  --> 用户交互入口，包含了交互前的准备工作和收尾工作，如数据库连接和关闭等

### 3、结构体与表的映射
* Dialect --> 支持多种数据库，以及数据库类型的映射，实现的是go type 对应 sqls type
  * 1、ORM映射，Go语言类型映射为数据库中的类型
    * 例如Go中的int类型有多种，int，int8，int16，对应Postgresql的`integer`类型
  * 2、ORM应该支持多种数据库
    * 不同数据库的类型即使功能相同，也是有差异的
    * 我们需要将差异的这一部分提取出来，每一种数据库分别实现，实现最大程度的复用和解耦

* Schema --> 实现结构体（struct）到 表（table）的转换
  * 建表我们需要哪些要素？
    * 表名  --> 结构体
    * 字段名和字段类型   --> 结构体的字段及字段类型
    * 额外的约束条件（如：非空、主键等） --> 结构体字段的Tag

* `Dialect` 和 `Schema` 的功能实际上是属于`Session` 中的细分的部门，因此需将其集成到`Session`里
  